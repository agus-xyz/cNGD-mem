%---------------------------------------------------------------------
%
%                          Capítulo 2
%
%---------------------------------------------------------------------

\chapter{Cognitive Wireless Sensor Networks: State of Art}

\begin{FraseCelebre}
\begin{Frase}
There's not much I know about you\\
Fear will always make you blind\\
But the answer is in clear view\\
It's amazing what you'll find face to face
\end{Frase}
%\begin{Fuente}
%Fuente
%\end{Fuente}
\end{FraseCelebre}

\begin{resumen}
This chapter shows an approach to the fundamentals of Wireless Sensor Networks and
the current development state of new paradigms such as Cognitive Radio, Cognitive Networks or Cognitive 
Wireless Sensor Networks. It describes current related applications and implementations, and introduce terms used all along
this dissertation.
\end{resumen}


%-------------------------------------------------------------------
\section{Cognitive Radio}
%-------------------------------------------------------------------
\label{cap2:sec:cognitiveRadio}
%-------------------------------------------------------------------

Nowadays, it is widely accepted that the main limitation in next-generation wireless systems is bandwidth scarcity. 
It is commonly believed that there is a crisis of spectrum availability for wireless communications\cite{corvus}.
However, according to regulatory bodies as the \ac{FCC}\cite{fcc} or the \ac{OFCOM}, most radio frequency spectrum is under-utilized while some spectrum bands are heavily used. Military, amateur radio or satellital frecuencies, for instance, are insuffiently utilized compared to cellular networks or the overcrowded \ac{ISM} bands\cite{wpanIssues}.

Most of the spectrum is allocated to specific applications and the static assignment of the spectrum 
results in an inefficient use of it. Figure~\ref{fig:spectrum} shows how the actual utilization in the 3-4 GHz
frequency band is 0.5\% and drops to 0.3\% in the 4-5 GHz band. This seems totally in contradiction to the concern of spectrum
shortage.

Spectrum utilization depends strongly on time and place, however, fixed spectrum allocation prevents specific assigned frequencies 
from being used, even when this use would not cause noticeable interference to the assigned service. These facts lead to the current inneficiency situation where the utilization of the total spectrum can be considered around 10\% and more than 95\% of the use is below 3GHz.

%datos triples sacaos de http://www.cmpe.boun.edu.tr/WiCo/doku.php?id=research#cognitive_radio
%WiMax Networks & Cognitive Radio, namely WiCo, is a research group functioning under Computer Networks Research Laboratory (NetLab) of Computer Engineering Department at bla 

\figuraEx{Vectorial/Todo}{width=.5\textwidth}{fig:spectrum}%
{A snapshot of the spectrum utilization up to 6 GHz in an urban area: taken at
mid-day with 20 kHz resolution taken over a time span of 50 microseconds with a 30
degree directional antenna at Berkeley Wireless Research Center \cite{seung}.}{A snapshot of the spectrum utilization up to 6 GHz in an urban area at BWRC}

The concept of \ac{CR} was first published by Joseph Mitola III and Gerald Q. Maguire, Jr. in 1999\cite{mitola1} and later on within Mitola's phD Dissertation in 2000\cite{mitola2}. It describes a novel paradigm for wireless communication in which a wireless device changes its transmission or reception parameters to communicate efficiently. This alteration of parameters is based on the active monitoring of several factors in the external and internal radio environment, such as radio frequency spectrum, user behavior, and network state. The idea was thought of as an ideal goal towards which a \ac{SDR} platform should evolve.

The cognitive radio is defined as an intelligent wireless communication system that is aware of its environment and uses the methodology of under-
standing-by-building to learn from the environment and adapt to statistical variations in the input stimuli, with two primary objectives:
\begin{itemize}
\item Hihighly reliable communications.
\item Efficient utilization of the radio spectrum.
\end{itemize}

Although the concept of \ac{CR} was defined originally as an extension to \ac{SDR}\cite{mitola1}, which is able to reason about
external factors, recently the term is mostly used in a narrower sense. \ac{FCC} suggests in~\cite{fcc1} that any radio having the adaptive spectrum awareness should be referred to as \ac{CR}:
\begin{quote}

\emph{
``A cognitive radio (CR) is a radio that can change its transmitter parameters based on
interaction with the environment in which is operates. The majority of cognitive radios will
probably be SDRs (Software Defined Radios), but neither having software nor being field
programmable are requirements of a cognitive radio.'' 
}

\end{quote}
Attending to some subtle differences between systems we can differenciate two main different types of \ac{CR}:

\begin{itemize}
\item \emph{Spectrum-Sensing Cognitive Radio}, in which only the radio-frequency spectrum is considered.\cite{brainempower}
\item \emph{Full Cognitive Radio  or Mitola radio}, in which every possible parameter observable by a wireless node is considered.\cite{mitola1}
\end{itemize}    

Although cognitive radio was initially thought of as full cognitive radio, most research work focuses on spectrum-sensing cognitive radio,  particularly in the TV bands. The great problem in spectrum-sensing cognitive radio is designing high-quality spectrum-sensing devices and algorithms for exchanging the so called knoledge domain \cite{brainempower}. The practical implementation of spectrum-management functions is a complex and multifaceted issue, since it must address a variety of technical and legal requirements.

Picture \ref{fig:CWSNsoftModel} ilustrates the changes the \ac{OSI} model suffer when affected by cognition. \ac{CR} model can be referred to the first and second layers, thus the \emph{Phisical} and \emph{Link} layers. 

\figura{Vectorial/Todo}{width=.5\textwidth}{fig:CWSNsoftModel}%
{CWSN protocol model}
%poner una unica pila


The main functions of \ac{CR} devices are:\cite{dsa}\cite{CRfunctionality}

\begin{itemize}

\item \emph{Spectrum sensing}: An important requirement is detecting unused spectrum and sharing it, without causing interferences to other users; Spectrum-sensing techniques may be grouped into three categories:

\begin{itemize}
\item \emph{Transmitter detection}: \ac{CR} must have the capability to determine if a signal from a primary transmitter is locally present in a certain spectrum. Enclosed here we can find approaches such as \emph{matched filter detection, energy detection or cyclostationary-feature detection} are common.

\item \emph{Cooperative detection}: Refers to spectrum-sensing methods where information from multiple \ac{CR} users is integrated\cite{sensing}.

\item \emph{Interference-based detection}. This technique is not so commonly used. 
\end{itemize}

\item \emph{Power Control}: Power control is used for both opportunistic spectrum access and spectrum sharing CR systems for finding the cut-off level in SNR supporting the channel allocation and imposing interference power constraints for the primary user's protection respectively. In~\cite{threshold} a joint power control and spectrum sensing is proposed for capacity maximization.

\item \emph{Spectrum management}: Capturing the best available spectrum to meet user communication requirements, while not creating undue interference to other users. \ac{CR} should decide on the best spectrum band (over the available range) to meet \ac{QOS} requirements; therefore, spectrum-management functions are required for \ac{CR}. Spectrum-management functions are classified as \emph{Spectrum analysis} and \emph{
Spectrum decision}.

\end{itemize}

Realizing that CR technology has the potential to exploit the inefficiently utilized licensed bands without causing interference to incumbent users, the FCC released a Notice of Proposed Rule Making which would allow unlicensed radios to operate in the TV-broadcast bands. The IEEE 802.22 working group, formed in November 2004, is tasked with defining the air-interface standard for wireless regional area networks (based on CR sensing) for the operation of unlicensed devices in the spectrum allocated to TV service \cite{80222}.

Dynamic spectrum allocation has become a key research activity in wireless communications field and in particular a key technology for ``The Network of the Future'' objective proposed in ICT FP7\footnote{Framework Programmes for Research and Technological Development are funding programmes created by the European Union in order to support and encourage research in the European Research Area (ERA).}.

%-------------------------------------------------------------------
\section{Cognitive Networks and Cognitive Radio Networks}
%-------------------------------------------------------------------
\label{cap2:sec:cognitiveNetworks}
%-------------------------------------------------------------------

On the last years, ``cognitive'' or ``smart'' have become \emph{trending topics} being applied to many fields, included
to communication technologies. Having a look into the 90s literature, easily at least we find mentions about
smart antennas\cite{smartantenna}, smart radios\cite{smartradio}, smart packets\cite{smartpackets}, \ac{CR}\cite{mitola1}\cite{brainempower}, cognitive packets\cite{cognitivepackets} and \ac{CN}\cite{cn1}\cite{cn2}.
Nevertheless, there does not seem to exist a commonly accepted definition of what these terms mean when applied to 
networking technologies.

The concept of \ac{CN} has been hanging out the collective psyche of the networking and wireless researching field for long. 
The first approach was made by Mitola\cite{mitola1} when briefly describes how the \ac{CR} could interact within the system-level scope 
of a \ac{CN}. Saracco\cite{saracco} talks about \ac{CN}s in his investigation into the future information technology. Mahonen et al. \cite{cn1}
 discuss \ac{CN}s with respect to future mobile \ac{IP} networks. None of these previous references, however, express clearly what 
a \ac{CN} is, how it should work and which problems it should solve.

The role that \ac{CR} had in inspiring the formulation of \ac{CN} concept, made, in some cases, \ac{CN}s being described as networks of 
\ac{CR}s\cite{mitola1}\cite{neel}. Recent research can be divided into two categories: \ac{CRN} and \ac{CN}s. 

For \ac{CRN}, Mitola mentions how \ac{CR}s could interact within the system-level scope of a \ac{CN}\cite{mitola2}. Neel\cite{gamecr}
and Haykin\cite{brainempower} continue this line of thinking, examinating multi-user networks of \ac{CR}s as a game.
The scope of \ac{CRN}s still remains primarily on \ac{MAC} and \ac{PHY} layers, but now operating with some end-to-end objective. 
In a \ac{CRN}, the individual radios take most of the cognitive decisions, although they may act in cooperation. Some suggested
applications for \ac{CRN}s include cooperative spectrum sensing\cite{coopsensing}\cite{coopsensing1} and emergency radio
networks \cite{cremergency}. Raychaudhuri presents in\cite{cnrarchitecture} a general architecture for \ac{CRN}s.

Regarding \ac{CN}s, Clark proposes, in which was perhaps the first mention of \ac{CN} rather than \ac{CRN},
a network that can

\begin{quotation}
``assemble itself given high level instructions, reassemble itself as requirements change, automatically discover when 
something goes wrong, and automatically fix a detected problem or explain why it cannot do so.''
\end{quotation}

This would be achieved with the use of a \ac{KP} that transcends layers and domains to make global 
cognitive decisions. The \ac{KP} will add intelligence and weight to the edges of the network, and context sensitivity 
to its core. Saracco stated\cite{saracco} that the change from network intelligence controlling resources to having context 
sensitivity will help "flatten" the network by moving network intelligence into the core and control further out to the 
edges of the network. \ac{CRN}s differ from \ac{CN}s in that their action space extends beyond the \ac{MAC} and \ac{PHY} layers and the network may 
consist of more than just wireless devices. Furthermore, CN nodes may be less autonomous than a CRN node.


First full definition of \ac{CN} was postulated by Thomas\cite{thomas} in which was his PhD Dissertation. Hi proposed
the idea of a CN:

\begin{quotation}
\emph{
a network composed of elements that, through learning and reasoning, dynamically adapt to varying network conditions in 
order to optimize end-to-end performance. In a CN, decisions are made to meet the requirements of the
network as a whole, rather than the individual network components. 
}
\end{quotation}


The adaptations that are performed over usual networks are commonly reactive, taking place after a problem has
occurred. Thomas advanced a paradigm that had the promise to remove these limitations by allowing networks to observe, act, and 
learn in order to optimize their performance. \ac{CN}s description in \cite{thomas} talks about intelligently select and adapt radio spectrum, transmission power, antenna parameters and routing tables. By formalizing the design, architecture and tradeoffs of cognition at the network level, Thomas work had a broad impact in advancing the paradigm of intelligent communication devices.

%-------------------------------------------------------------------
\subsection{Example}
%-------------------------------------------------------------------
This example was published \cite{thomas} in and it is inspired and influenced by Daniel Friend's example in \cite{example}. It illustrate the need for end-to-end rather than link adaptations.


\figuraEx{Bitmap/Capitulo2/example}{width=.5\textwidth}{fig:example}%
{Simple relay network for a wireless network. Vertices represent wireless connectivity}{Simple relay network for a wireless network.}


Consider an ad-hoc data session between a source node $S_{1}$ and a destination node $D_{1}$ as shown in Figure~\ref{fig:example}. The
source node does not have enough power to reach $D_{1}$ directly, so it must route traffic
through intermediate nodes $R_{1}$ and-or $R_{2}$. Assume that the end-to-end goal is to have the
highest probability of successful transmission. The routing layer will determine routes based
on minimum hop count which, in this case, includes either $R_{1}$ or $R_{2}$. Node $S_{1}$ will make a
link-layer adaptation, selecting between $R_{1}$ and $R_{2}$ based on their \ac{SINR}. From the standpoint of the 
link layer in node $S_{1}$, this ratio correlates with the probability that the transmitted packets will arrive correctly at the relay node.
However, without additional information, this selection does not guarantee anything about the end-to-end packet delivery probability from $S_{1}$ to $D_{1}$.
In contrast to a link adaptation, the \ac{CN} might use some combination of observations from
all nodes to compute the total path outage probabilities from $S_{1}$ to $D_{1}$ through $R_{1}$ and $R_{2}$.
This shows the benefit of an end-to-end scope, but there is another advantage to the
\ac{CN}, its cognitive capability. To illustrate this, we modify the original scenario to include
both $S_{1}$ and $S_{2}$ as source nodes, both routing traffic through $R_{2}$.
Suppose that the learning mechanism measures outages by determining the fraction of packets successfully delivered
from the source to its destination.

If $R_{2}$ becomes congested because of a large volume of traffic coming from $S_{2}$ this becomes
apparent to the cognitive process by the lack of successful packet delivery statistics provided
to $S_{1}$ and $S_{2}$. The learning mechanism recognizes that the system has changed and that
routing through $R_{2}$ is not optimal. The cognitive process then directs the traffic toward
another route. The \ac{CN} does not explicitly know that there is congestion at node $R_{2}$ because
this information is not included in the \ac{SINR} observations. Nevertheless, it is able to infer
from the reduced throughput that there may be a problem. It is then able to respond
to the congestion, perhaps by routing traffic through $R_{1}$ and/or $R_{3}$. This example shows
the power of \ac{CN}s in optimizing end-to-end performance as well as reacting to unforeseen
circumstances.
 
%-------------------------------------------------------------------
\section{Wireless Sensor Networks}
%-------------------------------------------------------------------
\label{cap2:sec:wirelessSensorNetworks}
%-------------------------------------------------------------------

A \ac{WSN} consists of spatially distributed autonomous ``nodes'' not relying on a pre existing communication infrastructure,  to monitor physical or environmental conditions. Number of nodes vary from a few to several hundreds or even thousands, where each node is connected to one (or sometimes several) sensors. Nodes are generally simple and low-resources embedded system with high cost and size constraints. These constraints result in corresponding constraints on resources such as energy, memory, computational speed and communications bandwidth. Usual architecture of a node is
divided in:

\begin{itemize}
\item \emph{Sensing subsystem}. Responsible for sensing physical parameters of the environment. Typical monitored parameters are temperature,
	sound, light, humidity, vibrations, pressure, movement, presence, body registers...
\item \emph{Computational subsystem}. It proccess the information obtained by the sensors and process it. It controls all general operations of the 		node, and runs the desired application.  
\item \emph{Communication subsystem}. To carry through all the messages transmission and reception with neighbor nodes. Main goal is to make
	the information gets to some destination, usually a gateway or storaging node.
\end{itemize}

\figura{Vectorial/Todo}{width=.5\textwidth}{fig:WSNnodeModel}%
{WSN node model}

The development of wireless sensor networks was motivated by military applications such as battlefield surveillance; today such networks are used in a wide range of applications, considered as the main technology to develop intelligent ambiences:

\begin{itemize}
 \item	\emph{Industrial Monitoring}. \ac{WSN} are applied mainly for machine health monitoring, water quality or management, and industral sense
         and control applications avoiding wire deployment.

 \item	\emph{Surveillance}. Distributed sensors over infrastructure as bridges, tunnels or buildings help to collect data to prevent
	damages or problems derivated from load excesses, weather, vibrations or stress. 

 \item	\emph{e-Health}. Not deeply explored yet. It presents new uses for \ac{WSN} to sense body parameters and observate behavioral patterns.
	These networks are used to detect or prevent occupational and home accidents, to improve diagnoses, monitoring sick people and other
	medical uses.

 \item	\emph{Environmental monitoring}. Applications regarding this fiel are diverse. Air quality monitoring, air pollution monitoring, forest fire 		detection, landslide detection, water quality monitoring or natural disaster prevention are some of the common uses.

 \item	\emph{Smart home monitoring}. Monitoring the activities performed in a smart home is achieved using wireless sensors embedded within everyday 		objects. State changes to objects based on human manipulation is captured by the \ac{WSN} enabling activity-support services.

 \item  \emph{Passive localization and tracking}. Applications oriented to detect where something took place or track presences over an area.

 \item  \emph{Agriculture}. Commonly used on greenhouses where irrigation management and ambient control is essential for a proper accurate
	agriculture.
\end{itemize}

Some of the main properties affecting \ac{WSN} are: 

\begin{itemize}
\item \emph{Dinamic topology}. In a \ac{WSN} it is common to suffer drops in the number of nodes or changes over the environment that
	affects the topology, nodes must be able to adapt themselves to new topologies to enable operative communications. On the same way,
	topologies must be scalables since a network might have tens of nodes or hundred of them.

\item \emph{Autonomous operation}. There is not need any infrastructure for a \ac{WSN} to operate. Its nodes act as information transmitters, 		receivers or routers. However, it usually exists a gateway which gather all the information over the network and pass it to another 		device. 

\item \emph{Multihop or broadcast communications}. It is common the use of some protocol to enable multihop messaging. Nevertheless, broadcasting
	 is also very expanded.

\item \emph{Power consumption}. One of the most important factors. Using a very constrained amount of energy, devices must achieve a tradeoff
	between autonomy and troughput. A \ac{WSN} node must meet a low-consumption microcontroller, as well as radio interfaces and software 
	equally featured.

\item \emph{Hardware constraints}. In order to achieve a low-power consumption, it is essential for the hardware to be as most straightforward
	as possible, coming into a limited computing capability.

\item \emph{Production costs}. Since \ac{WSN}s nature implies having a high number of nodes to be trustable, production of large amounts of them must 		provide a cheap unitary price.

\end{itemize}


Most important communication techonologies and protocols for \ac{WSN} are based on the IEEE 802.15.4 \cite{wpanieee} standard for \ac{WPAN}s.
The standard goal is a low-power communication among nearby devices without underlying infrastructure. The standard only defines \ac{MAC} and
\ac{PHY} layers of the \ac{OSI} model. Some expanded protocols based on the standard are ZigBee$^{TM}$ *****REF, WirelessHART*****REF, ISA100.11*****REF or MiWi$^{TM}$**********REF specifications. Another popular communication standard is IEEE 802.11***** REF, in which is based
WiFi*****REF. It is a \ac{IP} standard based on the final user and does not meet low-consumption constraints, however, convergence towards
full \ac{IP} has brought new standards such as \ac{6LOWPAN} *****REF, that enables \ac{IP} packeting over 802.15.4 based-on networks.


\begin{figure}[h]
\centering
%
\begin{SubFloat}
{\label{fig:cap2:wsn_router}%
\scriptsize{WSN con utilización de routers para la conexión con el gateway.}}%
\includegraphics[angle=270,width=0.45\textwidth]%
{Imagenes/Vectorial/Capitulo2/wsn_router}%
\end{SubFloat}
\qquad
\begin{SubFloat}
{\label{fig:cap2:wsn_adhoc}%
\scriptsize{WSN implementada como una red ad hoc.}}%
\includegraphics[angle=270,width=0.45\textwidth]%
{Imagenes/Vectorial/Capitulo2/wsn_adhoc}%
\end{SubFloat}
\caption{Posibles implementaciones de una red de sensores inalámbrica (WSN).}
\label{fig:cap2:wsn}
\end{figure}

%-------------------------------------------------------------------
\section{Cognitive Wireless Sensor Networks}
%-------------------------------------------------------------------
\label{cap2:sec:cognitiveWirelessSensorNetworks} 
%-------------------------------------------------------------------

\ac{CWSN}s arises as a natural evolution of traditional \ac{WSN}s since IEEE standards used in \ac{WSN}s already postulate access to several
bands of the spectrum. Additionally, \ac{QOS} and low-consumption requirements that \ac{WSN}s state, fits the goals of \ac{CR}. Currently, \ac{ISM} bands, where most of \ac{WSN}s place their radio activity, show an overcrowded scene where \ac{CR} techniques might significantly help the newtork operation. Applying cognitive capabilities seeks intelligent adaptations based on learning, reasoning and information sharing among multiple nodes in the network to achieve end-to-end goals. Thus, these techniques, based on distributed intelligence, contribute to improve performance
of the network over an extended period of time even in the presence of conflicting goals.

Basically, \ac{CR} and \ac{CN} techniques applied into \ac{WSN}s leads to \ac{CWSN}s. This idea suposses an increment of complexity over the executed algorithms and overload the control data flow over the network. Cognitive agents capable of making proactive decisions based on learning, reasoning and information sharing when interspersed in sensor networks, may help achieve end-to-end goals of the network even in the presence of
multiple constraints and optimization objectives. Cognitive radio at the physical layer of such agents may enable the opportunistic
use of the heterogeneous wireless environment. 

Cognitive communication in a sensor network could not only help meet end-to-end goals of the entire network, but also increase reliability of the network, reduce maintenance costs and increase the network lifetime. Research in \cite{gamewsn}[2]\cite{neuralcsn}\cite{crwsn}\cite{crbasedwsn}suggests the growing interest in applying cognitive techniques to \ac{WSN}s. The idea of a holistic approach to introducing cognition in heterogeneous
sensor networks that combines the advantage of opportunistic spectrum access at the physical layer, with cognitive communication among sensor nodes seamlessly across the network promises to be advantageous over existing design techniques.


\figura{Vectorial/Capitulo2/comparisonCR}{width=.7\textwidth}{fig:comparisoncr}%
{Comparison histogram of number of hops per packet in a simulated scenario described in \cite{crbasedwsn}}

However, research efforts have been discrete and cognitive techniques have focused on improving specific aspects of the network or benefiting specific applications.

Vijai contributes\cite{cwsn} to \ac{CWSN} giving the vision and advantage of a holistic approach to cognition in sensor
networks. It also provides a framework based on knowledge and cognition.


In \cite{conbrok} oportunities and trends arising from networks and nodes cooperation are mentioned. It is seen as a chance to improve
general features and dynamic adaptation capabilities. \cite{conbrok} proposes an implementation model based on agents carrying out basic functions 
and keeping a \ac{VCC}. This \ac{VCC} takes part on the \ac{KP} that agents use to exchange gestion messages.

On the other hand, applying cognitive techniques involving artificial intelligence and game theoretic approach to increase knowledge
in the system has several challenges. 

\begin{itemize}

\item As stated in \cite{gtandai}, nodes may be cheating or be constrainned about their valuations, i.e., communicating an agent's valuation for a large subset of the resources might become infeasible. Establishing the feasibility of integrating \ac{CR} into the \ac{DSA}\cite{ngdsa} scheme at the physical layer, along with cognition in upper layers to achieve end-to-end performance goals is an open research problem. 

\item For such networks to be justifiable, the performance improvement must outweigh the cost in terms of overhead, architecture, and operation. An analysis on the amount of energy expended in information sensingn and communicating the same to neighboring nodes is essential in establishing the suitability of this approach. 

\item Since the information available to the network may be partial or incorrect, it may lead to security issues and hence, issues and techniques to 	deal with such issues must also be identified. 

\item The proposed cognitive nodes could be statically distributed in the network or could be mobile, gathering information from remote locations of the sensor nodes. Hence, deciding on the optimal deployment architecture of the cognitive capability is also a challenging problem.

\item Protocols that define how the knowledge plane can be implemented to seamlessly access information from the end user and use it to make decisions at the physical layer, the cognitive specification language, and the tools used in cognitive decision making must all be standardized to make such networks interoperate.

\end{itemize}

All in all, this early-staged technology claims for investigations and research-enabling implementations such as standars, simulators and test-beds
that allow further studies and conclusive results. 
 
%-------------------------------------------------------------------
\subsection{Current Devices}
%-------------------------------------------------------------------
\label{cap2:sec:currentDevices}
%-------------------------------------------------------------------

Because of the novel stage of this research field, there are not many specific devices to build applications and services over \ac{CWSN}s. Besides, current implementations find themselves very poorly featured yet, not responding researchers' requirements. It is natural that most works are based on \ac{WSN} platforms on one side and \ac{SDR} platforms on the other side.

There are many different kinds of devices for WSN platforms with similar characteristics: low power, memory and processing constraints, and ISM bands. Bean, BTnode, MANTIS Nymph, IMote, MicaZ, SenseNode, XYZ, Sentilla Mini, TelosB [11]****REF, ANT [12]****REF, EyesIFX [13]****REf and Iris [14]****REF are some of the most important WSN devices. But none of them have different radio interfaces or radio reconfiguration capabilities.

There are many \ac{SDR} platforms that have been developed to support individual research projects. Berkeley Cognitive Radio Platform [7]****REF (del paper) (based around the BEE2\footnote{Berkeley Emulation Engine system is designed to be a modular, scalable FPGA-based computing platform}), OpenAirInterface [9] *** REF (proposed by the mobile communications department at EURECOM), NICT\footnote{Japanese National Institute of Information and Communications Technology} SDR platform [6]****REF (del paper), the Kansas University Agile Radio (KUAR) [8]****REF, or the Universal Software Radio Peripheral (USRP) [10]***REF are the most important ones.

In order to evaluate \ac{CWSN} models and architectures, great efforts have been carried through developing simulators or adapting traditional simulators to new schemes. Nevertheless, test-beds allow to test real systems, obtaining data about consumption, radio transmission ranges, error rates and providing trustable feedbacks to improve simulators performance. Here it is made a review over existing software and hardware platforms.

%-------------------------------------------------------------------
\subsubsection{Software platforms - simulators}
%-------------------------------------------------------------------

Some of the main characters over the existing simulators range are:
\begin{itemize}
\item \emph{NS2/NS3}. *****REF From Network Simulator. NS is a discrete-event network simulator primarily used in teaching and research. It supports
a large variety of multicast and unicast protocols of both wireless and wired networks. Intesively used in wireless mobile Ad-hoc networks. NS simulators are developed mainly under C++ and Python languages and they are publicly available under the GNU GPLv2 license for research, development, and use. Last stable version 

\begin{figure}[h!]
\centering
%
\begin{SubFloat}
{\label{fig:cap2:ns2logo}%
\scriptsize{NS2 Simulator Logo.}}%
\includegraphics[angle=0,width=0.3\textwidth]%
{Imagenes/Vectorial/Capitulo2/ns2logo}%
\end{SubFloat}
\qquad
\begin{SubFloat}
{\label{fig:cap2:ns3logo}%
\scriptsize{NS3 Simulator Logo.}}%
\includegraphics[angle=0,width=0.3\textwidth]%
{Imagenes/Vectorial/Capitulo2/ns3logo}%
\end{SubFloat}
\caption{NS2 and NS3 Simulators Logo.}
\label{fig:cap2:ns logos}
\end{figure}

Currently, NS2 scource code consists of many forks, both maintained and unmaintained. Last version, from 2009, is partially maintained but not being considered for journal publications. It runs on GNU/Linux, FreeBSD, Solaris, Mac OS X and Windows 95/98/NT/2000/XP. NS3 would be written from scratch, not being compatible with NS2 generally. Development of NS3 began in July 2006. The first release, NS 3.1 was made in June 2008, and afterwards the project continued making quarterly software releases, and more recently has moved to three releases per year. NS3 made its fifteenth release (ns-3.15) in the third quarter of 2012 and it is actively developed.

Libraries and packages for cognitive simulation and development exist for these simulators, however, models, parameters, and results are still quite poor and inaccurate.  

\item \emph{OMNeT++}. /******REF It is not a simulator itself but rather an extensible, modular, multiplatform, component-based C++ simulation library and framework. Instead of containi A real time cognitive radio testbed for physical and link layer experimentsng explicit and hardwired support for computer networks or other areas, it provides the infrastructure for writing such simulations. OMNeT++ provides a component architecture for models. Components (modules) are programmed in C++, then assembled into larger components and models using a high-level language (NED). These models, most of them opensource, are developed completely independently of OMNeT++, and follow their own release cycles. They cater domain-specific functionalities, such as support for sensor networks, wireless ad-hoc networks, Internet protocols, performance modeling, photonic networks. There are extensions for real-time simulation, network emulation, alternative programming languages (Java, C\#), database integration, SystemC integration, and several other functions. 

\figura{Vectorial/Capitulo2/omnetlogo}{width=.3\textwidth}{fig:omnetlogo}%
{OMNeT++ Simulator Logo}

\ac{CWSN} simulations over OMNeT++ are possible thanks to MiXiM. MiXiM is an OMNeT++ modeling framework created for mobile and fixed wireless networks (wireless sensor networks, body area networks, ad-hoc networks, vehicular networks, etc.). It offers detailed models of radio wave propagation, interference estimation, radio transceiver power consumption and wireless MAC protocols. It is a merger of several OMNeT++ frameworks written to support mobile and wireless simulations. The predecessors of MiXiM are ChSim, Mac Simulator, Mobility Framework and Positif Framework.

\item \emph{Castalia}. **** REFIt is a \ac{WSN} simulator based on OMNeT++ for early-phase algorithm/protocol testing built at the Networks and Pervasive Computing program of National ICT Australia since 2006. Since 2007 it is made public as an open source project under the \ac{APL} license The current release version is 3.2. It supports realistic channel and radio models, a key element for accurate early-phase \ac{WSN} simulation. It provides support for defining versatile physical processes for specific applications, since it is highly parametric, and can simulate a wide range of platforms. It also supports enhanced modeling of the sensing devices and other often-neglected attributes of a WSN such as node clock drift\footnote{Clock drift refers to several related phenomena where a clock does not run at the exact right speed compared to another clock.}.


\figura{Vectorial/Capitulo2/castalialogo}{width=.3\textwidth}{fig:castalialogo}%
{Castalia Simulator Logo}

Castalia support for \ac{CWSN} was first proposed by researchers from \ac{LSI} at Plytechnic University of Madrid **** REF in 2012.

\item \emph{NetSim}. NetSim is a stochastic discrete event simulator developed by Tetcos, in association with Indian Institute of Science, with the first release in June 2002. This popular network simulation tool used for network lab experimentation and research. Various technologies such as \ac{WSN}, Wireless LAN, WiMax, TCP, IP are supported. NetSim comes with an in-built development environment, which serves as the interface between User's code and NetSim's protocol libraries and simulation kernel. Protocol libraries are available as open C code for user modification. 

\figura{Vectorial/Capitulo2/netsimlogo}{width=.3\textwidth}{fig:netsimlogo}%
{NetSim Simulator Logo}

Some libraries available for NetSim enables \ac{CR} capabilities for simulations. However, these cognitive libraries are focused on applications for
802.22 WRAN based cognitive radio networks, which make this simulator undesirable for \ac{CWSN} scenarios.

\item \emph{\ac{SENDORA}}.****REF SENDORA project developed in 2010 suppossed a new approach of \ac{CR} called Sensor Network aided Cognitive Radio. This project was led by Thales, Eurecom, NTNU, Telenor, KTH, TKK, Universities of Rome, Valencia and Linköping. It was divided into 8 work packages taht covered from to management activities to dissemination passing through definition, integration, implementation and demonstrations activities.
Software based on the NS simulator was developed and hardware operating over VHDL language.

%http://www.sendora.eu/

\figura{Vectorial/Capitulo2/sendora_logo}{width=.3\textwidth}{fig:sendoralogo}%
{SENDORA Simulator Logo}

The SENDORA project brought a high amount of papers and literature, nevertheless, the software developed has come shifted to the background because of other simulators. Regarding hardware implementations, carried out over \ac{FPGA}, revealed useful data but not real devices. Hence, simulations deployed do not use real device data for the power model.


\end{itemize}

Several other simulators have been developed for \ac{WSN}. TOSSIM based on the TinyOS\footnote{TinyOS, started as a collaboration between the University of California in co-operation with Intel Research, is a free and open source software component-based operating system and platform targeting \ac{WSN}s).} operative system, COOJA, OPNET, GloMoSim, JSim, NetSIm or QualNet are more \ac{WSN} simulators without cognitive features despite some approaches and efforts to create frameworks enabling them.


%-------------------------------------------------------------------
\subsubsection{Hardware platforms}
%-------------------------------------------------------------------
Nowadays there are not real devices for \ac{CWSN} applications yet. Current implementations respond to development platforms or test-beds and still, 
variety of platforms is very scarce and poorly featured. Most of them suppose the first approaches on its field, so foundations to build over are still inmature and quickly changing. Hence, efforts focussed on hardware development, usuallyl more costly than software, remain quiet.

The closest existing device to a \ac{CWSN} node is the \ac{FCD}\cite{fcd}\cite{ferpfc} developed at \ac{LSI} in 2011. The \ac{FCD} is based on a Microchip 32-bits \ac{PIC} and includes three radio interfaces enabling access to the 2.4 GHz band and 868 MHz. MiWi and WiFi protocols operate over 2.4 GHz and a propietary protocol provided by \ac{AWD}\footnote{A radio interface developed by \ac{AWD}, a spin-off originated at \ac{LSI}, 
oriented on solutions for energy efficiency, industrial control and intelligent environments.} operates over 868 MHz. The device gave the chance to develop and test algorithms, strategies and and applications for \ac{CWSN}. Moreover, it allowed to analyse suitability for radio interfaces, computating capability. It gave the strengths and weaknesses to stablish the fundamentals on future designs. Nevertheless, the device still but it was just a first approach and it was still far to be a stable commercial testbed platform. The node did not fully satisfy requirements in terms of low power consumption, cost and size, and communication capabilities.

Consecutively, new hardware and software modules were incorporated to expand its features. These modules included a expansion board to try new transceiver options together with an optimized,\ac{CWSN} oriented firmware and a cognitive software module. This new modules claim for a new design integrating togethe all of them at one single module, fixing detected weaknesses and adding new or improved features. 

%paper del labocon carenciasSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSSS


%
\figura{Bitmap/Capitulo2/fcdadapted}{width=.5\textwidth}{fig:fcdadapted}%
{Picture of First Cognitive Device expanded}

Other deployed \ac{CWSN} devolpment networks placed at researching centers, so called test-beds, are employed to obtain data and try algorithms to feedback simulators and node devices themselves. Here mentioned test-beds do not include nodes with access to several radio bands, but rather several kind of nodes having different interfaces each. Hence, not real \ac{CWSN} nodes are implemented. Main current test-beds are: 

\begin{itemize}
\item \emph{TWIST (TKN Wireless Indoor Sensor network Testbed)}. *****REF Developed by the \ac{TKN} at the \ac{TU} Berlin, is one of the largest academic testbeds for experimenting with wireless sensor network applications at indoor deployment scenarios. It provides basic services like node configuration, network-wide programming, out-of-band extraction of debug data and gathering of application data, as well as several novel features  such as active power supply control of the nodes. The self-configuration capability, the use of hardware with standardized interfaces and open-source software makes the TWIST architecture scalable, affordable, and easily replicable. TWIST can be accessed locally or remotely via web interface.

\figura{Vectorial/Capitulo2/twistmap}{width=.9\textwidth}{fig:twistmap}%
{1 floor deployment of TWIST test-bed}

It spans the three floors, more than 40 rooms, of an office building at the TU Berlin campus, resulting in more than 1500 m$^{2}$ of instrumented office space. Currently the setup is populated with 102 TmoteSky**** REF nodes operating over 2.4 GHz and 102 eyesIFX**** REF nodes over 868 MHz resulting in a fairly regular grid deployment pattern with intra node distance of 3m. A set of low-cost USB WiSpy Spectrum Analyzers for the 2.4 GHz band dig over data and store it on a repository, this information is used as data-base for the \ac{CR} algorithms and spectrum use optimization.

\item \emph{VT-CRONET (Virginia Tech COgnitive Radio NEtwork Testbed)} ** REF It is a collection of \ac{CR} nodes deployed throughout a building on the Virginia Tech main campus. The testbed is openly available for the purposed of performing advanced \ac{CRN}. The testbed consists of a total of 48 static \ac{SDR} nodes based on USRP2\footnote{The \ac{USRP} family features a modular architecture with interchangeable daughterboard modules that serve as the RF front end.}, located in the ceiling throughout the ICTAS building, being placed 12 nodes per floor. In addition to the static nodes, low-power mobile nodes will also be available in order provide a research environment that accomodates a wide variety of research topics.

\figura{Vectorial/Capitulo2/vtcornetmap}{width=.6\textwidth}{fig:vtcornetmap}%
{Deployment of VT-CORNET test-bed}

Remotely accessible, emphasis is on cognitive engine design, self-organizing networking algorithms, and network security. The testbed enables researchers to implement and test their algorithms, protocols, applications, and hardware technologies within a realistic environment.

\item \emph{LOG-a-TEC}. LOG-a-TEC covers a set of diverse testbeds used for research purposes. The testbeds are mostly based on the VESNA****REF hardware platform - developed by SensorLab. The testbeds currently consist of 70-80 sensor nodes installed outdoors, mostly on light poles and rooftops in different regions of Slovenia. They allow remote monitoring, reconfiguration and experimentation. The application area range from environmental monitoring, smarts grids to cognitive radio experimentation. 

% AMPLIAAAAAAAAAAAAAAAAR CON PAAAAAAAAAAAAAAPEEEEEEEEEEEEEEEER


\item \emph{FIT/CorteXlab - Cognitive Radio Testbed}. This testbed, still under deployment, will be hosted at INSA-Lyon in France. CorteXlab will suppose one more researching center of the Future Internet of Things project****** REF. CorteXlab will use the network architecture developed in SensLAB and will integrate SDR nodes to offer a remotely accessible development platform for distributed \ac{CR}. Reconfigurability, compatibility, coexistence and even cooperation between \ac{SDR} nodes will be evaluable. A large set of heterogeneous \ac{SDR} nodes (\ac{MIMO} nodes, \ac{SISO} nodes and \ac{WSN} nodes) together with classical sensor nodes will permit a full experimental evaluation.

\figura{Vectorial/Capitulo2/cortexlablogo}{width=.3\textwidth}{fig:cortexlablogo}%
{CorteXlab testbed logo}

The testbed will be installed in 180 m$^{2}$ shielded room (isolated from any external interference) and also partly covered with \ac{EM} absorbing material. Depending on the set of enabled frequencies, the design of the room will enable to control the radio channel characteristics (number of paths, delays, etc...) and to ensure a high level of reproducibility of experimentations.


 \figura{Bitmap/Capitulo2/cortexlabmap}{width=.5\textwidth}{fig:cortexlabmap}%
{CorteXlab testbed deployment}

Nodes will be uniformly distributed. These nodes will be able to accept \ac{PHY} layer implementations on both hardware, i.e. \ac{FPGA}, and software on general purpose CPUs.  Furthermore, they will be capable of outputing performance metrics, such as throughput, \ac{BER} and power consumption. The nodes are interconnected through a high speed ethernet link, in order to allow for cooperation and sharing of information. A unified server will also be available for starting, coordinating and collecting the results of experimentations. The experimentation themselves can be from \ac{PHY} layer up, including the possibility of cross-layer interactions.
\end{itemize}

All in all, \ac{CWSN} nodes share common features with standard \ac{WSN} nodes. Particullary, \ac{CWSN} nodes must offer additional features such as certain frequency agility. It exists some devices, not \ac{CWSN}s-oriented but meeting this frequency agility. The most importants:

\begin{itemize}

\item \emph{VESNA}. **** REF WEB It is a modular and fully flexible platform for the development of \ac{WSN} developed at the SensorLab @ Jozef Stefan Institute. Based on the high-performance microcontroller with ARM Cortex-M3 core and radio interface spanning over multiple ISM frequency bands it is designed to meet the requirements of diverse applications. In terms of modularity the platform consists of the VESNA core module and a set of special feature modules (sensor node radio - SNR, sensor node expansion - SNE, sensor node power - SNP) that are used as/if needed. Various peripherals including UART, I2C, SPI, USB, ADC and DAC allow hosting of different sets of sensors and/or actuators.The platform readily supports:
\begin{itemize}
    \item Communication standards IEEE 802.15.4, IEEE 802.15.1 and IEEE 802.11. 
    \item ZigBee, 6LoWPAN, Bluetooth and Wireless M-Bus protocol stacks and technologies. 
    \item Operating system Contiki\footnote{Contiki is an open source operating system for networked, memory-constrained systems with a particular 		focus on low-power wireless Internet of Things devices.}. 
    \item Connection to the Internet via Wi-Fi, Ethernet or GSM/GPRS; 
    \item Arduino integrated development environment.
    \item A variety of energy supply options including battery, solar panel and external power supply. 
\end{itemize}

\begin{figure}[h!]
\centering
%
\begin{SubFloat}
	{\label{fig:cap2:vesnapic}%
	\scriptsize{Picture of VESNA.}}%
	\includegraphics[angle=0,width=0.4\textwidth]%
	{Imagenes/Vectorial/Capitulo2/vesna}%
\end{SubFloat}
\qquad
\begin{SubFloat}
	{\label{fig:cap2:sne}%
	\scriptsize{Picture of SNE-ISMTV-UHF (top) mounted on a VESNA sensor node (bottom).}}%
	\includegraphics[angle=0,width=0.4\textwidth]%
	{Imagenes/Bitmap/Capitulo2/vesnacomp}%
\end{SubFloat}
\caption{Pictures of SNE-ISMTV and VESNA modules.}
\label{fig:cap2:sneismtvvesna}
\end{figure}

To enable \ac{CR} capabilities on VESNA, a radio front-end was developed, the SNE-ISMTV****REF. Different versions were capable of operating in three frequency bands of interest (TV broadcast part of the UHF band, 868 MHz and 2.4 GHz ISM band) and flexible enough to enable various user scenarios. 

SNE-ISMTV-UHF contains a VHF and UHF TV band receiver based on the NXP TDA18219HN silicon tuner and was designed for spectrum sensing experimentation in TV white spaces. SNE-ISMTV-UHF can receive signals from 470 to 870 MHz with channel filter bandwidths between 1.7 MHz and 10 MHz. Using an analogue detector with a logarithmic response it can be used for energy detection experiments with the resolution bandwidth identical to the channel filter setting and approximately 50 ms per channel sampling. The detector is also coupled with an A/D converter optionally providing 1 Msample/s of the amplitude of the baseband signal. The samples can then be further digitally analyzed in software on the sensor node for more advanced spectrum
sensing methods.


SNE-ISMTV-868 and SNE-ISMTV-2400 are based on the TI CC1101 and TI CC2500 integrated circuits respectively and are identical in design and operation except for the supported frequency band. These transceivers contain software-reconfigurable radio front-ends operating from 780 and 930 MHz and from 2.40 to 2.48 GHz with channel bandwidths from 60 to 800 kHz and frequency-agile local oscillators with 75 ms settling time. They include an ntegrated logarithmic detector for energy detection and several modems that can be either connected to integrated packet handling hardware or provide a raw baseband digital stream to and from the CPU. This makes it possible to support experiments that require packet based as well as continuous transmissions.

\item \emph{WaspMote}. It is an ultra low-power consumption a sensor node developed and marketed by Libelium\footnote{http://www.libelium.com} based on an ATmega1281 microcontroller. It provides a socket for radio interfaces and several standarized input/output options. Libelium offers up to 60 different sensor expansion boards and 6 different radio options. An attachable board enables connection for two radio interfaces. It is thought to be a versatile node valid for a wide range of \ac{WSN} applications.

\begin{figure}[h!]
\centering
%
\begin{SubFloat}
	{\label{fig:cap2:waspmotelogo}%
	\scriptsize{WaspMote Logo.}}%
	\includegraphics[angle=0,width=0.3\textwidth]%
	{Imagenes/Vectorial/Capitulo2/waspmotelogo}%
\end{SubFloat}
\qquad
\begin{SubFloat}
	{\label{fig:cap2:waspmote}%
	\scriptsize{Picture of Libelium WaspMote.}}%
	\includegraphics[angle=0,width=0.3\textwidth]%
	{Imagenes/Bitmap/Capitulo2/waspmote}%
\end{SubFloat}
\caption{Libelium WaspMote.}
\label{fig:cap2:waspmotepics}
\end{figure}

\item \emph{Meshlium}. Meshlium, also from Libelium, works as the Gateway of the Waspmote \ac{SN}. It reads the sensor frames coming from the nodes and store them in its internal data base and in external cloud systems located on the Internet. The frames coming from Waspmote are normally received by the 802.15.4/ZigBee radio and sent to the Internet using Ethernet, WiFi and 3G interfaces.

\begin{figure}[h!]
\centering
%
\begin{SubFloat}
	{\label{fig:cap2:meshliummap}%
	\scriptsize{Meshlium operation mode.}}%
	\includegraphics[angle=0,width=0.5\textwidth]%
	{Imagenes/Bitmap/Capitulo2/meshliummap}%
\end{SubFloat}
\qquad
\begin{SubFloat}
	{\label{fig:cap2:meshlium}%
	\scriptsize{Picture of Libelium Meshlium.}}%
	\includegraphics[angle=0,width=0.4\textwidth]%
	{Imagenes/Vectorial/Capitulo2/meshlium}%
\end{SubFloat}
\caption{Libelium Meshlium.}
\label{fig:cap2:meshliumpics}
\end{figure}

\end{itemize}

Standardization is at the core of the current and future success of cognitive radio. The IEEE 802.22***REF WIKIPEDIA working group is developing what will be first cognitive radio-based international standard for \ac{WRAN} with tangible frequency bands for its operation. It will operate on unused television channels. One system such as Unlicensed-Band Cognitive Radio, which can only utilize unlicensed parts of the \ac{RF} spectrum, is described in the IEEE 802.15 Task Group 2 specifications***REF WIKI. This standard focus on the coexistence of IEEE 802.11 and Bluetooth. Many other standards such as WiFi (IEEE 802.11), Zigbee (IEEE 802.15.4), and WiMAX (IEEE 802.16) already include some degree of CR technology today. 

It has shown how \ac{CWSN} is still an inmature researching field where scarce devices, and all of them incomplete, are found. Real and complete devices to allow developers to try security, energy and spectrum optimization, and \ac{QOS} algorithms and strategies are needed. Facing this need,
\ac{LSI} proposes the implementation of a complete development platform, hardware and software, fully oriented to \ac{CWSN} investigation able to truly simulate real \ac{WSN} applications. Fulfilling \ac{WSN}, cognition and development requirements. This goal define and frames this Master Thesis.   
  

%-------------------------------------------------------------------
%\section*{\NotasBibliograficas}
%-------------------------------------------------------------------
%\TocNotasBibliograficas

%Citamos algo para que aparezca en la bibliografía\ldots
%\citep{ldesc2e}

%\medskip

%Y también ponemos el acrónimo \ac{CVS} para que no cruja.

%Ten en cuenta que si no quieres acrónimos (o no quieres que te falle la compilación en ``release'' mientras no tengas ninguno) basta con que no definas la constante \verb+\acronimosEnRelease+ (en \texttt{config.tex}).


%-------------------------------------------------------------------
%\section*{\ProximoCapitulo}
%-------------------------------------------------------------------
%\TocProximoCapitulo

%...

% Variable local para emacs, para  que encuentre el fichero maestro de
% compilación y funcionen mejor algunas teclas rápidas de AucTeX
%%%
%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../Tesis.tex"
%%% End:
