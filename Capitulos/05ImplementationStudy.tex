%---------------------------------------------------------------------
%
%                          Capítulo 5
%
%---------------------------------------------------------------------

\chapter{Implementation Study}

\begin{FraseCelebre}
\begin{Frase}
Time of your life
\end{Frase}
\begin{Fuente}
Thomas \& Guy-Manuel, Daft Punk
\end{Fuente}
\end{FraseCelebre}


\begin{resumen}
In this chapter, tasks related to the physical implementation of the platform are described. These tasks cover from the layout design, 3D modelling, and GERBER files generation, to the final components mounting on the . Decisions about components or layout designs, and final results are exposed.  
\end{resumen}



%-------------------------------------------------------------------
\section{Introduction}
%-------------------------------------------------------------------
\label{cap5:sec:introduction}
%------------------------------------------------------------------

Once the system is designed over a logic circuitry level, it is moment to build a \ac{PCB} design responsive to the developed schematics. This process includes the PCB dimmenssions, components placement, tracks routing, silkscreens, etc. These tasks are achieved over the Altium Designer, same software described in Section \ref{cap4:sec:altiumDesigner}.

All the implementations share some common features regarding their layout designs. On the one hand, the used components will keep, whenever possible\footnote{Some components do not offer SMD packaging due to their electric properties.}, \ac{SMD} packaging. This technology gives a more reduced size and supports lower power ratings. Precissely, the \ac{SMD} package used for most of two-terminal components is the 0603 (1608 metric) size\footnote{1.6 mm x 0.8 mm (0.063 in x 0.031 in). Typical power rating for resistors are 0.1 watt.} Figure \ref{fig:cap5:smdsizes} shows a classification for two-terminal \ac{SMD} components in metrics and imperial units.

\begin{figure}
        \centering
                \includegraphics{Imagenes/Vectorial/Capitulo5/smdsizes}
        \caption{Two-terminal SMD packages classification.}
        \label{fig:cap5:smdsizes}
\end{figure}

All the created layouts are built over two-layer boards. Two layers are enough for our purposes since they allow to place the components in a sufficiently reduced area and power planes are not required. More layers, in addition, would increase significantly the board costs. 

For the tracks routing process, some considerations are taken. Ground planes are placed to face noise reduction, this way a low impedance way is provided for the power signals. Moreover, parasitic \ac{EM} emissions are reduced. Power tracks are width enough to support the supplied current flow.

Together with the layout deployment, Altium Designer offers the chance to embbed 3D models of each component, building up eventually a whole 3D model of the complete board. This tool was employed, and 3D models were rendered, obtaining a preview of the modules on advance to their materialization.

\ac{PCB} manufacturer, PCBCART\footnote{www.pcbcart.com} will produce the \ac{PCB}s from the outputed fabrication files. Final \ac{PCB} posses a 1.6 mm thickness, and copper layers are 35 $\mu$m thick. 

%-------------------------------------------------------------------
\subsection{Mounting}
%-------------------------------------------------------------------
Small package components, like the employed here, requires for precission tools to be mounted. Proper tweezers are helpful dealing with components. The soldering station used is a JBC AM 6000 ************REF, offering several soldering tips on the 1-4 mm diameter and useful tools as hot tweezers or desoldering accesories. Binocular loupe ************** WHATEVER ************ is essential for better precission. 

Components use to include at their datasheets guidelines about their surrounding layout, soldering tips, or mounting processes. They are reviewed and taken into account for the proccess.

The secuential mounting, and the existing firmware allow to carry through simple tests to ckeck proper functionality and detect errors. Actually, several corrections and adjustments were made during the mounting task.  

%-------------------------------------------------------------------
\section{Transceivers - $\mu$Trans 434/868}
%-------------------------------------------------------------------
\label{cap5:sec:transceivers}
%------------------------------------------------------------------

\figura{Vectorial/Todo}{width=0.4\textwidth}{fig:cap5:mtrans3dmodel}%
{$\mu$Trans 434/868 3D model.}

%-------------------------------------------------------------------
\subsection{Description}
%-------------------------------------------------------------------

This module was developed because of the non-existance of reduced size \ac{RI}s including the MRF49XA transceiver, so, by definition, the module must posses a reduced size. Taking advantage of the included MRF24j40MA \ac{RI}, it was decided to design a \ac{PCB} module fitting the footprint of the named \ac{RI}. This way a single footprint is commont to all the included \ac{RI}s. This footprint is defined in Figure \ref{fig:cap5:mtransfootprint}.

\begin{figure}
        \centering
                \includegraphics{Imagenes/Vectorial/Todo}
        \caption{$\mu$Trans 434/868 and MRF24j40MA shared footprint.}
        \label{fig:cap5:mtransfootprint}
\end{figure}

The \ac{PCB} size must be suitable for this footprint, not exceeding its width. $\mu$Trans \ac{PCB} shape is defined as in Figure \ref{fig:cap5:mtransshape}.

\begin{figure}
        \centering
                \includegraphics{Imagenes/Vectorial/Todo}
        \caption{$\mu$Trans 434/868 \ac{PCB} shape.}
        \label{fig:cap5:mtransshape}
\end{figure}

Module pads are based vias\footnote{A via is a electrical connection between layers in a physical electronic circuit that goes through the plane of one or more adjacent layers.}, with a ******* mm rad. through hole. These holes are width enouth let the solder tip into them and solder the pads over the footprint. These pads constitute the electrical interface between the $\mu$Trans and \ac{CNGD} and suppose a low-cost and size solution.  

MRF49XA datasheet provides hints for the inclussion of the transceiver into a \ac{PCB}. It recommends to fill area underneath the transceiver with ground vias, thereby the module includes such vias. In addition, to have an easily accessible measure of the clock signal, the top layer posses a small pad that provides this signal. Minimal spacing is set to ****************** and the standard track width is *********************** . Power tracks width is set to *********** and ground planes are placed on top and botton layers. Table \ref{tab:cap5:mtranscomponents} contains the needed components for the $\mu$Trans 434/868 on both versions.

\begin{table}[h]
\centering
\scalebox{0.7}{
\begin{tabular}{||c | c ||}
\hline \\
\hline \\
\hline \\
\hline \\

\end{tabular}
}
\caption{Component description for $\mu$Trans 434/868.%
         \label{tab:cap5:mtranscomponents}}
\end{table} 

%-------------------------------------------------------------------
\subsection{Layout}
%-------------------------------------------------------------------
Different layers of the layout can be obseved at Appendix \ref{ap2:layout}. Figures \ref{} and \ref{} show the top and botton copper layers respectively. Figures \ref{} and \ref{} give the view of the top and botton silkscreens respectively.

%-------------------------------------------------------------------
\subsection{Testing}
%-------------------------------------------------------------------

Basic tests to check proper functionality were made while prototyping the module.

Firstly, the modules were tested over the \ac{FCD} platform. For this, the $\mu$Trans pads were wired and connected to header prepared for the MRF49XA PICtail Plus Daughter Board. On this platform and using an multi-probe oscilloscope ********************************, \ac{SPI} communication signals and other were checked, and possible errors debbuged.

After this, and in collaboration with other MRF49XA modules, it was checked that the module properly carried out handshaking, network detection and joining, and data transmission and reception processes.

%-------------------------------------------------------------------
\subsection{Final Result}
%-------------------------------------------------------------------

\figura{Vectorial/Todo}{width=0.4\textwidth}{fig:cap5:mtransfront}%
{Detailed front view of the $\mu$Trans module.}

\figura{Vectorial/Todo}{width=0.4\textwidth}{fig:cap5:mtransback}%
{Detailed back view of the $\mu$Trans module.}

%-------------------------------------------------------------------
\section{Main Board - cognitiveNextGenerationDevice}
%-------------------------------------------------------------------
\label{cap5:sec:currentDevices}
%-------------------------------------------------------------------

\figura{Vectorial/Todo}{width=0.4\textwidth}{fig:cap5:cngd3dmodel}%
{cNGD 3D model.}

%-------------------------------------------------------------------
\subsection{Description}
%-------------------------------------------------------------------
% shape porque
% FIGURA

%POWER SUPPLY, USB Y PGE 


%AGUJEROS PARA bateria y patas.

% FIGURA BATERIAS

%PORTAPILAS aguejereado

%HEADERS

%FIGURA HEADER

% spacing, track width


\begin{table}[h]
\centering
\scalebox{0.7}{
\begin{tabular}{||c | c ||}
\hline \\
\hline \\
\hline \\
\hline \\

\end{tabular}
}
\caption{Component description for cNGD.%
         \label{tab:cap5:cngdcomponents}}
\end{table} 
%-------------------------------------------------------------------
\subsection{Layout}
%-------------------------------------------------------------------
Different layers of the layout can be obseved at Appendix \ref{ap2:layout}. Figures \ref{} and \ref{} show the top and botton copper layers respectively. Figures \ref{} and \ref{} give the view of the top and botton silkscreens respectively.
%-------------------------------------------------------------------
\subsection{Testing}
%-------------------------------------------------------------------
%PRIMERO MCU y oscillators y PROGRAMAR

% probar leds y pulsadores
% POWER SUPPLY
%USANDO LA SERIAL COMMUNICATION BOARD
% RIs usando firmware

%-------------------------------------------------------------------
\subsection{Final result}
%-------------------------------------------------------------------
\figura{Vectorial/Todo}{width=0.4\textwidth}{fig:cap5:cngdfront}%
{Detailed front view of the cNGD.}

\figura{Vectorial/Todo}{width=0.4\textwidth}{fig:cap5:cngdback}%
{Detailed back view of the cNGD.}



%-------------------------------------------------------------------
\section{Serial Communication Board - rs232SHIELD}
%-------------------------------------------------------------------
\label{cap5:sec:rs232shield}
%-------------------------------------------------------------------

\figura{Vectorial/Todo}{width=0.4\textwidth}{fig:cap5:rs2323dmodel}%
{rs232SHIELD 3D model.}

%-------------------------------------------------------------------
\subsection{Layout}
%-------------------------------------------------------------------
Different layers of the layout can be obseved at Appendix \ref{ap2:layout}. Figures \ref{} and \ref{} show the top and botton copper layers respectively. Figures \ref{} and \ref{} give the view of the top and botton silkscreens respectively.
%-------------------------------------------------------------------
\subsection{Testing}
%-------------------------------------------------------------------

%-------------------------------------------------------------------
\subsection{Final results}
%-------------------------------------------------------------------

\figura{Vectorial/Todo}{width=0.4\textwidth}{fig:cap5:rs232front}%
{Detailed front view of the rs232SHIELD module.}

\figura{Vectorial/Todo}{width=0.4\textwidth}{fig:cap5:rs232back}%
{Detailed back view of the rs232SHIELD module.}

%-------------------------------------------------------------------
\section{Battery charger - chargerSHIELD}
%-------------------------------------------------------------------
\label{cap5:sec:chargerShield}
%-------------------------------------------------------------------

\figura{Vectorial/Todo}{width=0.4\textwidth}{fig:cap5:charger3dmodel}%
{chargerSHIELD 3D model.}

%-------------------------------------------------------------------
\subsection{Layout}
%-------------------------------------------------------------------
Different layers of the layout can be obseved at Appendix \ref{ap2:layout}. Figures \ref{} and \ref{} show the top and botton copper layers respectively. Figures \ref{} and \ref{} give the view of the top and botton silkscreens respectively.
%-------------------------------------------------------------------
\subsection{Testing}
%-------------------------------------------------------------------

%-------------------------------------------------------------------
\subsection{Final results}
%-------------------------------------------------------------------
\figura{Vectorial/Todo}{width=0.4\textwidth}{fig:cap5:chargerfront}%
{Detailed front view of the chargerSHIELD module.}

\figura{Vectorial/Todo}{width=0.4\textwidth}{fig:cap5:chargerback}%
{Detailed back view of the chargerSHIELD module.}


%-------------------------------------------------------------------
\section{Conclusions}
%-------------------------------------------------------------------
\label{cap5:sec:conclusions}
%-------------------------------------------------------------------


%------------------------------------------------------------------
%\section*{\NotasBibliograficas}
%-------------------------------------------------------------------
%\TocNotasBibliograficas

%Citamos algo para que aparezca en la bibliografía\ldots
%\citep{ldesc2e}

%\medskip

%Y también ponemos el acrónimo \ac{CVS} para que no cruja.

%Ten en cuenta que si no quieres acrónimos (o no quieres que te falle la compilación en ``release'' mientras no tengas ninguno) basta con que no definas la constante \verb+\acronimosEnRelease+ (en \texttt{config.tex}).


%-------------------------------------------------------------------
%\section*{\ProximoCapitulo}
%-------------------------------------------------------------------
%\TocProximoCapitulo

%...

% Variable local para emacs, para  que encuentre el fichero maestro de
% compilación y funcionen mejor algunas teclas rápidas de AucTeX
%%%
%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../Tesis.tex"
%%% End:
